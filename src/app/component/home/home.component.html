<div class="products">
  <div class="carousel-container">
    <!-- Debug Info -->
    <div *ngIf="!popularProducts.length" class="debug-info">
      Loading popular products...
    </div>

    <!-- Carrossel Personalizado -->
    <div *ngIf="popularProducts.length > 0" class="custom-carousel">
      <div class="carousel-inner">
        <div 
          *ngFor="let product of popularProducts; let i = index"
          class="carousel-item"
          [class.active]="i === currentSlide"
        >
          <img
            [src]="product.image"
            [alt]="product.name"
            class="carousel-image"
            onerror="this.src='https://via.placeholder.com/1200x400?text=Image+Not+Found'"
          />
          <div class="carousel-caption">
            <h3>{{ product.name }}</h3>
            <p>{{ product.description || 'No description available' }}</p>
          </div>
        </div>
      </div>
      
      <!-- Indicadores -->
      <div class="carousel-indicators" *ngIf="popularProducts.length > 1">
        <button
          *ngFor="let _ of popularProducts; let i = index"
          [class.active]="i === currentSlide"
          (click)="selectSlide(i)"
        ></button>
      </div>
    </div>
  </div>

  <h1>Products</h1>

  <p *ngIf="message" class="form-success-message">{{ message }}</p>

  <table>
    <thead>
      <tr>
        <th>Image</th>
        <th>Name</th>
        <th>Price</th>
        <th>Category</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of products">
        <td><img [src]="product.image" alt="" /></td>
        <td>{{ product.name }}</td>
        <td>{{ product.price }}</td>
        <td>{{ product.category }}</td>
        <td>{{ product.description }}</td>
        <td>
          <fa-icon
            class="icon-button"
            [icon]="faTrash"
            (click)="handleDeleteProduct(product.id!)"
          ></fa-icon>

          <fa-icon
            class="icon-button"
            [icon]="faEdit"
            (click)="handleRedirectToUpdateProduct(product.id!)"
          ></fa-icon>
        </td>
      </tr>
    </tbody>
  </table>
</div>
